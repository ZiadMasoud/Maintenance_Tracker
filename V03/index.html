<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MyCar — Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
    <meta name="theme-color" content="#0b6fb2" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">MyCar • Personal Manager</div>
      <div class="top-actions">
        <button id="btnExport" class="btn">Export</button>
        <label class="btn file-btn"
          >Import <input id="importFile" type="file" accept="application/json"
        /></label>
        <button id="btnSettings" class="btn">Settings</button>
      </div>
    </header>

    <nav class="tabs" id="tabs">
      <button class="tab active" data-page="dashboard">Dashboard</button>
      <button class="tab" data-page="savings">Savings</button>
      <button class="tab" data-page="maintenance">Maintenance</button>
      <button class="tab" data-page="fuel">Fuel</button>
      <button class="tab" data-page="parts">Parts</button>
      <button class="tab" data-page="suppliers">Suppliers</button>
    </nav>

    <main class="container">
      <!-- Dashboard -->
      <section id="dashboard" class="page active">
        <div class="page-head">
          <h1>Dashboard</h1>
          <div class="quick-actions">
            <button class="btn add" data-action="open-add" data-type="savings">
              + Savings
            </button>
            <button
              class="btn add"
              data-action="open-add"
              data-type="maintenance"
            >
              + Maintenance
            </button>
            <button class="btn add" data-action="open-add" data-type="fuel">
              + Fuel
            </button>
            <button class="btn add" data-action="open-add" data-type="part">
              + Part
            </button>
          </div>
        </div>

        <div class="cards" id="dashCards"></div>

        <div class="panel">
          <h3>Recent activity</h3>
          <div id="recentList" class="list"></div>
        </div>

        <div class="panel">
          <h3>Reports (static previews)</h3>
          <div class="grid-3">
            <div class="chart-card">
              <h4>Savings over time</h4>
              <canvas id="miniSave" width="360" height="120"></canvas>
            </div>
            <div class="chart-card">
              <h4>Fuel cost trend</h4>
              <canvas id="miniFuel" width="360" height="120"></canvas>
            </div>
            <div class="chart-card">
              <h4>Maintenance cost trend</h4>
              <canvas id="miniMaint" width="360" height="120"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- Savings -->
      <section id="savings" class="page">
        <div class="page-head">
          <h1>Savings</h1>
          <button class="btn add" data-action="open-add" data-type="savings">
            Add
          </button>
        </div>

        <div class="panel">
          <form id="savingsForm" class="form-grid">
            <div>
              <label>Month</label><input id="savMonth" type="month" required />
            </div>
            <div>
              <label>Monthly income (EGP)</label
              ><input
                id="savIncome"
                type="number"
                min="0"
                step="0.01"
                required
              />
            </div>
            <div>
              <label>Other income (EGP)</label
              ><input
                id="savOther"
                type="number"
                min="0"
                step="0.01"
                value="0"
              />
            </div>
            <div>
              <label>Manual extra (EGP)</label
              ><input
                id="savExtra"
                type="number"
                min="0"
                step="0.01"
                value="0"
              />
            </div>
            <div class="form-actions" style="grid-column: 1/-1">
              <button class="btn add" type="submit">Record</button>
              <button class="btn danger" id="btnClearSavings" type="button">
                Clear
              </button>
            </div>
          </form>
        </div>

        <div class="panel">
          <h3>History</h3>
          <table class="table" id="savingsTable">
            <thead>
              <tr>
                <th>Month</th>
                <th>Income</th>
                <th>Other</th>
                <th>40%</th>
                <th>20%</th>
                <th>Extra</th>
                <th>Total</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div id="savingsSummary" class="summary"></div>
        </div>
      </section>

      <!-- Maintenance -->
      <section id="maintenance" class="page">
        <div class="page-head">
          <h1>Maintenance</h1>
          <button
            class="btn add"
            data-action="open-add"
            data-type="maintenance"
          >
            Add
          </button>
        </div>
        <div class="panel">
          <table class="table" id="maintTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Odo</th>
                <th>Type</th>
                <th>Cost</th>
                <th>Parts</th>
                <th>Supplier</th>
                <th>Next</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <!-- Fuel -->
      <section id="fuel" class="page">
        <div class="page-head">
          <h1>Fuel</h1>
          <button class="btn add" data-action="open-add" data-type="fuel">
            Add
          </button>
        </div>

        <div class="panel">
          <table class="table" id="fuelTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Odo</th>
                <th>Spent</th>
                <th>Price/L</th>
                <th>Liters</th>
                <th>Total</th>
                <th>km/L</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <!-- Parts -->
      <section id="parts" class="page">
        <div class="page-head">
          <h1>Parts</h1>
          <button class="btn add" data-action="open-add" data-type="part">
            Add
          </button>
        </div>
        <div class="panel">
          <table class="table" id="partTable">
            <thead>
              <tr>
                <th>SKU</th>
                <th>Name</th>
                <th>Price</th>
                <th>Supplier</th>
                <th>Warranty (mo)</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <!-- Suppliers -->
      <section id="suppliers" class="page">
        <div class="page-head">
          <h1>Suppliers</h1>
          <button class="btn add" data-action="open-add" data-type="supplier">
            Add
          </button>
        </div>
        <div class="panel">
          <table class="table" id="supplierTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Rating</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </main>

    <!-- Side panel -->
    <aside id="sidePanel" class="side-panel" aria-hidden="true">
      <div class="side-header">
        <h3 id="sideTitle">Add</h3>
        <button id="sideClose" class="small-btn">Close</button>
      </div>
      <div id="sideContent" class="side-content"></div>
    </aside>

    <!-- Settings template -->
    <template id="settingsTemplate">
      <div class="panel">
        <h3>Settings</h3>
        <div style="display: grid; gap: 8px">
          <label
            >Fuel unit:
            <select id="fuelUnit">
              <option value="kmpl">km/L</option>
              <option value="l100km">L/100km</option>
            </select>
          </label>
          <button id="resetApp" class="btn danger">
            Reset Application (clear all)
          </button>
        </div>
      </div>
    </template>

    <script src="db.js"></script>
    <script src="charts.js"></script>
    <script src="app.js"></script>
  </body>
</html>
